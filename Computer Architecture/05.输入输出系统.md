# 输入输出系统

* 从完成工作的性质分类
  * 存储I/O系统
  * 通信I/O系统
* 评价I/O系统性能的主要参数
  * 连接特性 
    * 哪些I/O设备可以和计算机系统相连接
  * I/O 系统的容量
    * I/O系统可以容纳的I/O设配数
  * 响应时间
  * 吞吐率
* 反映存储外设可靠性能的参数
  * 可靠性 reliability
  * 可用性 availability
  * 可信性 dependability
* 系统的可用性
  * 系统正常工作的时间在连续两次正常服务间隔时间中所占的比率
  * 可用性 = MTTF / (MTTF + MTTR)
  * MTTF --Mean Time To Failure，平均无故障时间
  * MTTR --Mean Time To Repiar，平均修复时间
  * MTBF --Mean Time Between Failure
    * MTBF = MTTF + MTTR
* 总线
  * 缺点：由不同的外设分时共享的，形成了信息交换的瓶颈，从而限制了系统中总的I/O吞吐量
  * 并行总线可以获得较大的峰值带宽

## 通道处理机

* 由一种称为通道处理机（简称通道）的专用处理机来专门负责整个计算机系统的输入/输出工作
* 只能执行有限的一组输入/输出指令

### 参数

* Ts 设备选择时间
  * 从通道响应设备发出的数据传送请求开始，到通道实际为这台设备传送数据所需要的时间
* TD 传送一个字节所用的时间
* P 在一个通道上连接设备的台数，且这些设备都在同时工作
* n 每台设备传送的字节数，这里假设每台设备同时在工作
* k 数组多路通道传送的一个数据块中包含的字节数。在一般情况下，k<n
  * 磁盘通常k=512
* T 通道完成全部数据传送工作所需要的时间

#### 字节多路通道

* T BYTE = (Ts + TD) *p *n
* f max-byte = 1 / (Ts + TD)

#### 选择通道

* T SELECT = (Ts/n + TD) *p *n

#### 数组多路通道

* T BLOCK = (Ts/k + TD) *p *n
  
### 功能

* 接受CPU发来的I/O指令，并根据指令要求选择指定的外设与通道相连接
* 执行通道程序。即从主存中逐条取出通道指令，对通道指令进行译码，并根据需要向被选中的设备控制器发出各种操作指令
* 给出外设中要进行读/写操作的数据所在的地址。如磁盘存储器的柱面号、磁头号、扇区号等
* 给出主存缓冲区的首地址
  * 来暂时存放从外设输入的数据或者将要输出到外设的数据
* 控制外设与主存缓冲区之间的数据传送长度，即对传送的数据的个数进行计数，并判断数据传送是否结束
* 指定传送工作结束时要进行的操作
  * 例：将外设的中断请求以及通道的中断请求送往CPU
* 检查外设的工作状态是否正常，并将该状态信息送往主存指定单元保存
* 在数据传输的过程中完成必要的格式转换

### 通道硬件

* 寄存器
  * 数据缓冲寄存器、主存地址计数器、传输字节计数器、通道命令字寄存器、通道状态字寄存器
* 控制逻辑
  * 分时控制、地址分配、数据传输、数据装配和拆分

### 完成一次数据传输过程 主要过程

* 在y用户程序中使用访管指令进入管理程序，由管理程序生成一个通道程序，并启动通道
* 通道处理机执行通道程序，完成指定的数据输入/输出工作
* 通道程序结束后向CPU发中断请求
> 在一次输入/输出中，CPU需要两次调用管理程序，大大减少了对用户程序的干扰，当系统中有多个通道同时工作时，CPU与多种不同类型、不同速度的外设可以充分并行工作

### 通道的种类

* 字节多路通道 (byte multiplexer channel)
* 选择通道 (selector channel)
* 数组多路通道 (block multiplexer channel)

### 通道流量

* 又称为通道吞吐率、通道数据传输率
* 一个通道在数据传送期间，单位时间内能够传送的数据量
* 单位：Bps 字节每秒
